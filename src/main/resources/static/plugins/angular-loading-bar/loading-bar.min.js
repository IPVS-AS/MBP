/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var n=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(n,t,a,r,i,c){r.showLoading=!0;var o,l=0,d=0,s=c.latencyThreshold;function u(){a.cancel(o),c.complete(),d=0,l=0}function g(n){var a,r=t.get("$http"),i=e.defaults;!n.cache&&!i.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(a=angular.isObject(n.cache)?n.cache:angular.isObject(i.cache)?i.cache:r);var c=void 0!==a&&void 0!==a.get(n.url);return void 0!==n.cached&&c!==n.cached?n.cached:(n.cached=c,c)}return{request:function(e){return e.ignoreLoadingBar||g(e)||!r.showLoading||(r.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===l&&(o=a(function(){c.start()},s)),l++,c.set(d/l)),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||g(e.config)||(++d>=l?(r.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),u()):c.set(d/l)),e):(i.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||g(e.config)||(++d>=l?(r.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),u()):c.set(d/l)),n.reject(e)):(i.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),n.reject(e))}}}];e.interceptors.push(n)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,n,t,a){var r,i,c,o=this.parentSelector,l=angular.element(this.loadingBarTemplate),d=l.find("div").eq(0),s=angular.element(this.spinnerTemplate),u=!1,g=0,h=this.autoIncrement,p=this.includeSpinner,f=this.includeBar,m=this.startSize;function v(e){if(u){var n=100*e+"%";d.css("width",n),g=e,h&&(t.cancel(i),i=t(function(){B()},250))}}function B(){if(!(b()>=1)){var e=0,n=b();e=n>=0&&n<.25?(3*Math.random()+3)/100:n>=.25&&n<.65?3*Math.random()/100:n>=.65&&n<.9?2*Math.random()/100:n>=.9&&n<.99?.005:0,v(b()+e)}}function b(){return g}function $(){g=0,u=!1}return{start:function(){if(r||(r=e.get("$animate")),t.cancel(c),!u){var i=n[0],d=i.querySelector?i.querySelector(o):n.find(o)[0];d||(d=i.getElementsByTagName("body")[0]);var g=angular.element(d),h=d.lastChild&&angular.element(d.lastChild);a.$broadcast("cfpLoadingBar:started"),u=!0,f&&r.enter(l,g,h),p&&r.enter(s,g,l),v(m)}},set:v,status:b,inc:B,complete:function(){r||(r=e.get("$animate")),v(1),t.cancel(c),c=t(function(){var e=r.leave(l,$);e&&e.then&&e.then($),r.leave(s),a.$broadcast("cfpLoadingBar:completed")},500)},autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();